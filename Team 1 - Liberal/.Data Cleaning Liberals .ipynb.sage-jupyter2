{"backend_state":"running","connection_file":"/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/.local/share/jupyter/runtime/kernel-40dbb270-22fe-479a-8e99-bbca38bcc557.json","kernel":"nlp_env","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"trust":true,"type":"settings"}
{"end":1655325905729,"exec_count":149,"id":"17dab9","input":"kaggle_liberal_dataset.shape","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"(8034, 2)"},"exec_count":149}},"pos":0.5,"start":1655325905715,"state":"done","type":"cell"}
{"end":1655325987359,"exec_count":154,"id":"766a29","input":"ald.shape","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"(102102, 2)"},"exec_count":154}},"pos":5,"start":1655325987345,"state":"done","type":"cell"}
{"end":1655325999344,"exec_count":156,"id":"d448dc","input":"ald.shape","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"(62893, 3)"},"exec_count":156}},"pos":10,"start":1655325999339,"state":"done","type":"cell"}
{"end":1655327026948,"exec_count":195,"id":"d7a0c0","input":"ald['body'][0]","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"'and after durhams clarification she could possibly win its harder for a public figure but fox has shown actual malice towards her'"},"exec_count":195}},"pos":34.00006103515625,"start":1655327026941,"state":"done","type":"cell"}
{"end":1655327048238,"exec_count":196,"id":"f1632b","input":"#remove accents\nimport unicodedata\ndef remove_accented_chars(x):\n    x = unicodedata.normalize('NFKD', x).encode('ascii', 'ignore').decode('utf-8', 'ignore')\n    return x\nald['body'] = ald['body'].apply(lambda x: remove_accented_chars(x))","kernel":"nlp_env","pos":35,"start":1655327048113,"state":"done","type":"cell"}
{"end":1655327068199,"exec_count":198,"id":"1bb702","input":"ald.shape","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"(62893, 5)"},"exec_count":198}},"pos":35.5,"start":1655327068185,"state":"done","type":"cell"}
{"end":1655327277367,"exec_count":204,"id":"81c4a0","input":"if '.' in ald.body[0]:\n    print('a')","kernel":"nlp_env","pos":35.75,"start":1655327277363,"state":"done","type":"cell"}
{"end":1655328186734,"exec_count":266,"id":"402cf6","input":"#remove html tags\nfrom bs4 import BeautifulSoup\nald['body'] = ald['body'].apply(lambda x: BeautifulSoup(x, 'html.parser').get_text().strip())\nald.head(30)","kernel":"nlp_env","output":{"0":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n      <th>word_counts</th>\n      <th>emails</th>\n      <th>emails_count</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>andafterdurhamsclarificationshecouldpossiblywi...</td>\n      <td>2</td>\n      <td>22</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>itssaditstakenusthislongtogethere</td>\n      <td>2</td>\n      <td>10</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>repchriscollinstippedoffhissonwithinsiderinfot...</td>\n      <td>5</td>\n      <td>23</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>iftrumpusesthe5thitwilllookbadonlyifthepublicg...</td>\n      <td>3</td>\n      <td>23</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>timetoendthatnetworkandimbecileslikehannity</td>\n      <td>3</td>\n      <td>9</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>howmuchisthatceoworthwhatpercentageofhisworthi...</td>\n      <td>3</td>\n      <td>14</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>withericalloptionsatnumbet500areopen</td>\n      <td>1</td>\n      <td>9</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>mrsclintonlostin2016whydoesfoxandtheidiotalway...</td>\n      <td>3</td>\n      <td>24</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>inatwopartysystemlikewehavethemorecandidateswh...</td>\n      <td>3</td>\n      <td>293</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>ughitshouldcovertheirentireimmediatefamilythel...</td>\n      <td>18</td>\n      <td>37</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>weshouldstartagofundmejusttogetthelawsuitgoing</td>\n      <td>11</td>\n      <td>13</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>itsjustasimportantasanythingelsethatwillneverg...</td>\n      <td>5</td>\n      <td>36</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>seanlumpyhannityadeveryoneatfixnewshatesdemocr...</td>\n      <td>3</td>\n      <td>22</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>13</th>\n      <td>hisdareseemstobeproofofactualmalice</td>\n      <td>40</td>\n      <td>9</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>14</th>\n      <td>idontlikeherpoliticsbutsheshowishonest</td>\n      <td>4</td>\n      <td>10</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>15</th>\n      <td>hannitycangotohellwegotalloffoxnewsbroadcastwh...</td>\n      <td>22</td>\n      <td>49</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>theironyisthatthelawandorderrhetoricundernixon...</td>\n      <td>1</td>\n      <td>63</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>17</th>\n      <td>illdonateaslongasthewearejustentertainmentdefe...</td>\n      <td>16</td>\n      <td>23</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>18</th>\n      <td>shouldntallprimarysbeopenwithrankchoiceandthen...</td>\n      <td>9</td>\n      <td>22</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>19</th>\n      <td>icouldnotbemoreantitrumpandifilivedinwyomingiw...</td>\n      <td>10</td>\n      <td>50</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>20</th>\n      <td>foxsimplyfosterscultismasitcannotwinovernewmem...</td>\n      <td>31</td>\n      <td>23</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>evenifseanhannityorfoxlostthatfighttheywouldwi...</td>\n      <td>9</td>\n      <td>25</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>22</th>\n      <td>thegoalofthelefthowaboutthegoalofthegaowherepe...</td>\n      <td>3</td>\n      <td>27</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>23</th>\n      <td>ifpleadingthe5thmeantjudgementdidntcomeifeelli...</td>\n      <td>2</td>\n      <td>27</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>24</th>\n      <td>maybestephenkingcangetinonthishesworthabout500...</td>\n      <td>13</td>\n      <td>20</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>25</th>\n      <td>gttheypointtothespecialelectionlastspringinnew...</td>\n      <td>4</td>\n      <td>118</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>whowantstobetthattheyallpleadthe5thtoeveryques...</td>\n      <td>1</td>\n      <td>13</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>27</th>\n      <td>iwillnotcelebrateuntilaftertheyhavetestifiedan...</td>\n      <td>1</td>\n      <td>28</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>28</th>\n      <td>truepleadingthefifthdoesnotmeanjudgementwontbe...</td>\n      <td>1</td>\n      <td>41</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>29</th>\n      <td>iftruthbetoldwethesilentmajorityarealreadypull...</td>\n      <td>2</td>\n      <td>54</td>\n      <td>[]</td>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","text/plain":"                                                 body  score  word_counts  \\\n0   andafterdurhamsclarificationshecouldpossiblywi...      2           22   \n1                   itssaditstakenusthislongtogethere      2           10   \n2   repchriscollinstippedoffhissonwithinsiderinfot...      5           23   \n3   iftrumpusesthe5thitwilllookbadonlyifthepublicg...      3           23   \n4         timetoendthatnetworkandimbecileslikehannity      3            9   \n5   howmuchisthatceoworthwhatpercentageofhisworthi...      3           14   \n6                withericalloptionsatnumbet500areopen      1            9   \n7   mrsclintonlostin2016whydoesfoxandtheidiotalway...      3           24   \n8   inatwopartysystemlikewehavethemorecandidateswh...      3          293   \n9   ughitshouldcovertheirentireimmediatefamilythel...     18           37   \n10     weshouldstartagofundmejusttogetthelawsuitgoing     11           13   \n11  itsjustasimportantasanythingelsethatwillneverg...      5           36   \n12  seanlumpyhannityadeveryoneatfixnewshatesdemocr...      3           22   \n13                hisdareseemstobeproofofactualmalice     40            9   \n14             idontlikeherpoliticsbutsheshowishonest      4           10   \n15  hannitycangotohellwegotalloffoxnewsbroadcastwh...     22           49   \n16  theironyisthatthelawandorderrhetoricundernixon...      1           63   \n17  illdonateaslongasthewearejustentertainmentdefe...     16           23   \n18  shouldntallprimarysbeopenwithrankchoiceandthen...      9           22   \n19  icouldnotbemoreantitrumpandifilivedinwyomingiw...     10           50   \n20  foxsimplyfosterscultismasitcannotwinovernewmem...     31           23   \n21  evenifseanhannityorfoxlostthatfighttheywouldwi...      9           25   \n22  thegoalofthelefthowaboutthegoalofthegaowherepe...      3           27   \n23  ifpleadingthe5thmeantjudgementdidntcomeifeelli...      2           27   \n24  maybestephenkingcangetinonthishesworthabout500...     13           20   \n25  gttheypointtothespecialelectionlastspringinnew...      4          118   \n26  whowantstobetthattheyallpleadthe5thtoeveryques...      1           13   \n27  iwillnotcelebrateuntilaftertheyhavetestifiedan...      1           28   \n28  truepleadingthefifthdoesnotmeanjudgementwontbe...      1           41   \n29  iftruthbetoldwethesilentmajorityarealreadypull...      2           54   \n\n   emails  emails_count  \n0      []             0  \n1      []             0  \n2      []             0  \n3      []             0  \n4      []             0  \n5      []             0  \n6      []             0  \n7      []             0  \n8      []             0  \n9      []             0  \n10     []             0  \n11     []             0  \n12     []             0  \n13     []             0  \n14     []             0  \n15     []             0  \n16     []             0  \n17     []             0  \n18     []             0  \n19     []             0  \n20     []             0  \n21     []             0  \n22     []             0  \n23     []             0  \n24     []             0  \n25     []             0  \n26     []             0  \n27     []             0  \n28     []             0  \n29     []             0  "},"exec_count":266}},"pos":34.25,"start":1655328182799,"state":"done","type":"cell"}
{"end":1655328246981,"exec_count":270,"id":"4151a0","input":"import pandas as pd\n# add all data into 1 big dataset\njoanne_dataset = pd.read_csv('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/joanne_liberals_6months.csv')\npeter_dataset = pd.read_csv('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/peter-democrats-6months.csv')\nkaggle_dataset = pd.read_csv('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/kaggle_dataset.csv')","kernel":"nlp_env","output":{"0":{"name":"stderr","text":"/tmp/ipykernel_5017/3623583555.py:4: DtypeWarning: Columns (4,6,9,39,41,42,43,47) have mixed types. Specify dtype option on import or set low_memory=False.\n  peter_dataset = pd.read_csv('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/peter-democrats-6months.csv')\n"}},"pos":0,"start":1655328245350,"state":"done","type":"cell"}
{"end":1655328250770,"exec_count":271,"id":"d65d39","input":"joanne_dataset = joanne_dataset[joanne_dataset['score'] > 0]\npeter_dataset = peter_dataset[peter_dataset['score'] > 0]\njoanne_dataset = joanne_dataset[['body', 'score']]\npeter_dataset = peter_dataset[['body', 'score']]\n\nkaggle_liberal_dataset = kaggle_dataset[kaggle_dataset['Political Lean'] == 'Liberal']\nkaggle_liberal_dataset = kaggle_liberal_dataset[kaggle_liberal_dataset['Score'] > 0]\nkaggle_liberal_dataset = kaggle_liberal_dataset[['Title', 'Score']]\nkaggle_liberal_dataset = kaggle_liberal_dataset.rename(columns={\"Title\":\"body\"})\nkaggle_liberal_dataset = kaggle_liberal_dataset.rename(columns={\"Score\":\"score\"})\nkaggle_liberal_dataset.head()\n# adding all of the datasets together\nlist_of_datasets = [peter_dataset, joanne_dataset, kaggle_liberal_dataset]\nald = pd.concat(list_of_datasets)\n# cleaning the data\nald.shape","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"(102102, 2)"},"exec_count":271}},"pos":2,"start":1655328250637,"state":"done","type":"cell"}
{"end":1655328253882,"exec_count":272,"id":"598125","input":"# turn all the data to lower-case\nald['body'] = ald['body'].apply(lambda x: str(x).lower())","kernel":"nlp_env","pos":4,"start":1655328253757,"state":"done","type":"cell"}
{"end":1655328256851,"exec_count":273,"id":"4150c8","input":"# filter the data by the number of words in each comment\nald['word_counts'] = ald['body'].apply(lambda x: len(str(x).split()))\nald = ald[ald['word_counts'] > 8]","kernel":"nlp_env","pos":6,"start":1655328256573,"state":"done","type":"cell"}
{"end":1655328258857,"exec_count":274,"id":"a0cf07","input":"ald.reset_index(drop=True, inplace=True)","kernel":"nlp_env","pos":10.5,"start":1655328258850,"state":"done","type":"cell"}
{"end":1655328265069,"exec_count":275,"id":"76a612","input":"#remove email\nimport re\n# creates a column with the count of number of emails the comment has\nald['emails'] = ald['body'].apply(lambda x: re.findall(r'([a-z0-9+._-]+@[a-z0-9+._-]+\\.[a-z0-9+_-]+\\b)', x))\nald['emails_count'] = ald['emails'].apply(lambda x: len(x))\n# removes all the eamils from the comments\nald['body'] = ald['body'].apply(lambda x: re.sub(r'([a-z0-9+._-]+@[a-z0-9+._-]+\\.[a-z0-9+_-]+)',\"\", x))","kernel":"nlp_env","pos":11,"start":1655328261518,"state":"done","type":"cell"}
{"end":1655328267919,"exec_count":276,"id":"a42fd0","input":"#remove big spaces\n\nald['body'] = ald['body'].apply(lambda x: ' '.join(x.split()))","kernel":"nlp_env","pos":20,"start":1655328267561,"state":"done","type":"cell"}
{"end":1655328271475,"exec_count":277,"id":"d7fae2","input":"#remove url\nald['body'] = ald['body'].apply(lambda x: re.sub(r'(http|https|ftp|ssh)://([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])?', '' , x))","kernel":"nlp_env","pos":32,"start":1655328270695,"state":"done","type":"cell"}
{"end":1655328299937,"exec_count":279,"id":"48fe11","input":"ald2=ald.copy()","kernel":"nlp_env","pos":32.5,"start":1655328299914,"state":"done","type":"cell"}
{"end":1655328374957,"exec_count":283,"id":"66a309","input":"pwd","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"'/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Team 1 - Liberal'"},"exec_count":283}},"pos":34.00000000000006,"start":1655328374952,"state":"done","type":"cell"}
{"end":1655328507580,"exec_count":285,"id":"b66707","input":"#remove special characters\n\nald['body'] = ald['body'].apply(lambda x: re.sub(r'[^\\w.,;!?]+', ' ', x))\n# ald['body'] = ald['body'].apply(lambda x: re.sub(r'[^\\w\\s]', '', x))\nald.to_csv('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/cleaned_liberal_data.csv')","kernel":"nlp_env","pos":34,"start":1655328504137,"state":"done","type":"cell"}
{"exec_count":1,"id":"6b6450","input":"","kernel":"nlp_env","output":{"0":{"data":{"text/plain":"'/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Team 1 - Liberal'"},"exec_count":1}},"pos":53,"state":"done","type":"cell"}
{"id":"019924","input":"","pos":10.625,"type":"cell"}
{"id":"04d741","input":"","pos":13.25,"type":"cell"}
{"id":"0b36de","input":"","pos":10.75,"type":"cell"}
{"id":"10339c","input":"","pos":34.625,"type":"cell"}
{"id":"1dec20","input":"","pos":34.000000000000114,"type":"cell"}
{"id":"1fd6d5","input":"","pos":0.125,"type":"cell"}
{"id":"2c2043","input":"","pos":2.5,"type":"cell"}
{"id":"2cb6b3","input":"","kernel":"nlp_env","pos":1,"type":"cell"}
{"id":"2da9e1","input":"","pos":0.015625,"type":"cell"}
{"id":"3c91b6","input":"","pos":35.875,"type":"cell"}
{"id":"459a7b","input":"","pos":34.296875,"type":"cell"}
{"id":"46ebff","input":"","pos":33,"type":"cell"}
{"id":"502b4a","input":"","pos":8,"type":"cell"}
{"id":"5afd18","input":"","pos":54,"type":"cell"}
{"id":"5c1748","input":"","pos":36,"type":"cell"}
{"id":"685f4b","input":"","pos":0.0078125,"type":"cell"}
{"id":"74fb79","input":"","pos":34.00000000000364,"type":"cell"}
{"id":"789d44","input":"","pos":0.03125,"type":"cell"}
{"id":"7c255a","input":"","pos":0.0625,"type":"cell"}
{"id":"86c23e","input":"","pos":4.5,"type":"cell"}
{"id":"91077f","input":"","pos":34.00000000000182,"type":"cell"}
{"id":"91dff1","input":"","pos":34.34375,"type":"cell"}
{"id":"921dc4","input":"","pos":4.25,"type":"cell"}
{"id":"94add5","input":"","pos":0.25,"type":"cell"}
{"id":"9812d8","input":"","pos":34.000000000000455,"type":"cell"}
{"id":"9f85f9","input":"","pos":15.5,"type":"cell"}
{"id":"a363ee","input":"","pos":34.00000000000003,"type":"cell"}
{"id":"a5a825","input":"","pos":34.2734375,"type":"cell"}
{"id":"a717a5","input":"","pos":34.00000000000023,"type":"cell"}
{"id":"a76d6a","input":"","pos":34.4375,"type":"cell"}
{"id":"a82c34","input":"","pos":34.000000000000085,"type":"cell"}
{"id":"a894b0","input":"","pos":21.5,"type":"cell"}
{"id":"b0ebff","input":"","pos":34.000064849853516,"type":"cell"}
{"id":"b14a3e","input":"","pos":35.625,"type":"cell"}
{"id":"b5f774","input":"","pos":34.00000000000091,"type":"cell"}
{"id":"bc83f2","input":"","pos":33.5,"type":"cell"}
{"id":"bc9068","input":"","pos":3,"type":"cell"}
{"id":"c44783","input":"","pos":55,"type":"cell"}
{"id":"c596e1","input":"","pos":23,"type":"cell"}
{"id":"ead8af","input":"","pos":34.000000000000014,"type":"cell"}
{"id":"f91c63","input":"","pos":7,"type":"cell"}
{"id":"faa2bf","input":"","pos":34.26171875,"type":"cell"}
{"id":0,"time":1655328404044,"type":"user"}
{"last_load":1655241964473,"type":"file"}