{"backend_state":"init","connection_file":"/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/.local/share/jupyter/runtime/kernel-6819c68f-80f6-4f73-a843-838c5308d132.json","kernel":"nlp_env","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.9.12"}},"trust":true,"type":"settings"}
{"cell_type":"code","exec_count":0,"id":"4be43c","input":"","pos":1,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"87ddde","input":"","pos":4,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"a5e4e4","input":"","pos":6,"type":"cell"}
{"cell_type":"code","exec_count":1,"id":"c34899","input":"import pandas as pd\nimport re\nfrom bs4 import BeautifulSoup\nimport unicodedata","pos":0,"type":"cell"}
{"cell_type":"code","exec_count":18,"id":"70da0f","input":"\n#importing scraping dataset\nrepub_data_1 = pd.read_csv ('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/nishant-republicans-1year.csv')\nrepub_data_1 = repub_data_1[['body', 'score']] \nrepub_data_1","output":{"0":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Serious question. Why do Republicans always ta...</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>You think Lebron James wants complete abolishm...</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>I thought it was the welfare and govt help\\n t...</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Ngl it is a good luck. Did you ever find that ...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Why? He‚Äôs right</td>\n      <td>0</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>24211</th>\n      <td>Gunman kills 19 children in Texas school rampa...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>24212</th>\n      <td>Gunman kills 19 children in Texas school rampa...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>24213</th>\n      <td>\\n\"Please note that this is a **Republican** s...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>24214</th>\n      <td>\\n\"Please note that this is a **Republican** s...</td>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>24215</th>\n      <td>\\n\"Please note that this is a **Republican** s...</td>\n      <td>1</td>\n    </tr>\n  </tbody>\n</table>\n<p>24216 rows √ó 2 columns</p>\n</div>","text/plain":"                                                    body  score\n0      Serious question. Why do Republicans always ta...      0\n1      You think Lebron James wants complete abolishm...      0\n2      I thought it was the welfare and govt help\\n t...      0\n3      Ngl it is a good luck. Did you ever find that ...      1\n4                                        Why? He‚Äôs right      0\n...                                                  ...    ...\n24211  Gunman kills 19 children in Texas school rampa...      1\n24212  Gunman kills 19 children in Texas school rampa...      1\n24213  \\n\"Please note that this is a **Republican** s...      1\n24214  \\n\"Please note that this is a **Republican** s...      1\n24215  \\n\"Please note that this is a **Republican** s...      1\n\n[24216 rows x 2 columns]"},"exec_count":18,"output_type":"execute_result"}},"pos":2,"type":"cell"}
{"cell_type":"code","exec_count":19,"id":"087da1","input":"#importing kaggle dataset and removing unwanted columns\nrepub_data_2 = pd.read_csv ('/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/kaggle_dataset.csv')\nrepub_data_2 = repub_data_2[repub_data_2['Political Lean'] == 'Conservative']\nrepub_data_2 = repub_data_2[['Title', 'Score']]\nrepub_data_2 = repub_data_2[repub_data_2['Title'] != '[removed]']\nrepub_data_2 = repub_data_2[repub_data_2['Score']>=3]\nrepub_data_2 = repub_data_2.replace(to_replace ='\\n', value = ' ', regex = True)\nrepub_data_2.columns = ['body', 'score']\nrepub_data_2","output":{"0":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>8334</th>\n      <td>You fired our troops, Don‚Äôt ever act like you ...</td>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>8336</th>\n      <td>BREAKING: Ben Shapiro rebuts Joe Biden's 'path...</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>8337</th>\n      <td>BREAKING: Biden heckled over 13 killed soldier...</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>8338</th>\n      <td>State of the Union: Republicans hammer Biden f...</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>8339</th>\n      <td>State of the Union: Republicans hammer Biden f...</td>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12839</th>\n      <td>\"You folks need to lay off of the theory and a...</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>12840</th>\n      <td>Carson's rejoinders to criticisms of his \"Stud...</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>12841</th>\n      <td>This Is the Obama-Aurora Billboard Everyone's ...</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>12842</th>\n      <td>Questions about The School Sucks Podcast</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>12845</th>\n      <td>Libertarianism and Anarchy</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n<p>2960 rows √ó 2 columns</p>\n</div>","text/plain":"                                                    body  score\n8334   You fired our troops, Don‚Äôt ever act like you ...     13\n8336   BREAKING: Ben Shapiro rebuts Joe Biden's 'path...     10\n8337   BREAKING: Biden heckled over 13 killed soldier...      6\n8338   State of the Union: Republicans hammer Biden f...      3\n8339   State of the Union: Republicans hammer Biden f...      5\n...                                                  ...    ...\n12839  \"You folks need to lay off of the theory and a...      9\n12840  Carson's rejoinders to criticisms of his \"Stud...     10\n12841  This Is the Obama-Aurora Billboard Everyone's ...     12\n12842           Questions about The School Sucks Podcast      6\n12845                         Libertarianism and Anarchy      3\n\n[2960 rows x 2 columns]"},"exec_count":19,"output_type":"execute_result"}},"pos":3,"type":"cell"}
{"cell_type":"code","exec_count":20,"id":"887e99","input":"#removing unwanted columns\nrepub_data_1 = repub_data_1[repub_data_1['body'] != extra]\nrepub_data_1 = repub_data_1[repub_data_1['body'] != '[removed]']\nrepub_data_1 = repub_data_1[repub_data_1['score']>=2]\nrepub_data_1 = repub_data_1.replace(to_replace ='\\n', value = ' ', regex = True)\nrepub_data_1","output":{"0":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>7</th>\n      <td>Ngl, Trump would look like a f****** boss if h...</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>This photo and its caption are self-evident.  ...</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>Love Steven Crowder!!!!üíï</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>IMO, if she wants to represent our country on ...</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>Clever- love the ‚Äúphoto‚Äù- perfect.</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>24195</th>\n      <td>https://www.businessinsider.com/us-systemic-ra...</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>24198</th>\n      <td>Are you saying non-citizen immigrants are voti...</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>24200</th>\n      <td>Trump is going to cause us to lose 2024 and he...</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>24205</th>\n      <td>Quit buying Nike, simple</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>24207</th>\n      <td>Unfortunately it's with the half of Americans ...</td>\n      <td>2</td>\n    </tr>\n  </tbody>\n</table>\n<p>3789 rows √ó 2 columns</p>\n</div>","text/plain":"                                                    body  score\n7      Ngl, Trump would look like a f****** boss if h...      2\n10     This photo and its caption are self-evident.  ...      3\n11                              Love Steven Crowder!!!!üíï      2\n12     IMO, if she wants to represent our country on ...      2\n16                    Clever- love the ‚Äúphoto‚Äù- perfect.      2\n...                                                  ...    ...\n24195  https://www.businessinsider.com/us-systemic-ra...      2\n24198  Are you saying non-citizen immigrants are voti...      3\n24200  Trump is going to cause us to lose 2024 and he...      2\n24205                           Quit buying Nike, simple      2\n24207  Unfortunately it's with the half of Americans ...      2\n\n[3789 rows x 2 columns]"},"exec_count":20,"output_type":"execute_result"}},"pos":7,"type":"cell"}
{"cell_type":"code","exec_count":21,"id":"1d2116","input":"#combining dataframes\nframes = [repub_data_1, repub_data_2]\nrepub_data = pd.concat(frames)\nrepub_data['body'][24]","output":{"0":{"data":{"text/plain":"'The chocolate one is the best bar imo'"},"exec_count":21,"output_type":"execute_result"}},"pos":8,"type":"cell"}
{"cell_type":"code","exec_count":22,"id":"b0ef23","input":"#lowercasing\nrepub_data['body'] = repub_data['body'].apply(lambda x: str(x).lower())","pos":9,"type":"cell"}
{"cell_type":"code","exec_count":23,"id":"66fba9","input":"#no more emails\nrepub_data['body'] = repub_data['body'].apply(lambda x: re.sub(r'([a-z0-9+._-]+@[a-z0-9+._-]+\\.[a-z0-9+_-]+)',\"\", x))\nrepub_data.shape","output":{"0":{"data":{"text/plain":"(6749, 2)"},"exec_count":23,"output_type":"execute_result"}},"pos":10,"type":"cell"}
{"cell_type":"code","exec_count":24,"id":"6f78b0","input":"#removes url\nrepub_data['body'] = repub_data['body'].apply(lambda x: re.sub(r'(http|https|ftp|ssh)://([\\w_-]+(?:(?:\\.[\\w_-]+)+))([\\w.,@?^=%&:/~+#-]*[\\w@?^=%&/~+#-])?', '' , x))\nrepub_data.shape","output":{"0":{"data":{"text/plain":"(6749, 2)"},"exec_count":24,"output_type":"execute_result"}},"pos":11,"type":"cell"}
{"cell_type":"code","exec_count":25,"id":"de95af","input":"#figure out how to keep ./-,\nrepub_data['body'] = repub_data['body'].apply(lambda x: re.sub(r'[^\\w.\\',;!?]+', \" \", x))\nrepub_data","output":{"0":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>7</th>\n      <td>ngl, trump would look like a f boss if he did....</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>this photo and its caption are self evident. i...</td>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>love steven crowder!!!!</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>imo, if she wants to represent our country on ...</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>16</th>\n      <td>clever love the photo perfect.</td>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12839</th>\n      <td>you folks need to lay off of the theory and a...</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>12840</th>\n      <td>carson's rejoinders to criticisms of his studi...</td>\n      <td>10</td>\n    </tr>\n    <tr>\n      <th>12841</th>\n      <td>this is the obama aurora billboard everyone's ...</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>12842</th>\n      <td>questions about the school sucks podcast</td>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>12845</th>\n      <td>libertarianism and anarchy</td>\n      <td>3</td>\n    </tr>\n  </tbody>\n</table>\n<p>6749 rows √ó 2 columns</p>\n</div>","text/plain":"                                                    body  score\n7      ngl, trump would look like a f boss if he did....      2\n10     this photo and its caption are self evident. i...      3\n11                              love steven crowder!!!!       2\n12     imo, if she wants to represent our country on ...      2\n16                        clever love the photo perfect.      2\n...                                                  ...    ...\n12839   you folks need to lay off of the theory and a...      9\n12840  carson's rejoinders to criticisms of his studi...     10\n12841  this is the obama aurora billboard everyone's ...     12\n12842           questions about the school sucks podcast      6\n12845                         libertarianism and anarchy      3\n\n[6749 rows x 2 columns]"},"exec_count":25,"output_type":"execute_result"}},"pos":12,"type":"cell"}
{"cell_type":"code","exec_count":26,"id":"2318fc","input":"repub_data = repub_data[repub_data['body'] != '']\nrepub_data.shape","output":{"0":{"data":{"text/plain":"(6732, 2)"},"exec_count":26,"output_type":"execute_result"}},"pos":13,"type":"cell"}
{"cell_type":"code","exec_count":27,"id":"1bc209","input":"#removes multiple spaces\nrepub_data['body'] = repub_data['body'].apply(lambda x: ' '.join(x.split()))","output":{"0":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_4884/984530229.py:2: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n  repub_data['body'] = repub_data['body'].apply(lambda x: ' '.join(x.split()))\n"}},"pos":14,"type":"cell"}
{"cell_type":"code","exec_count":28,"id":"675d45","input":"#removes html\nrepub_data['body'] = repub_data['body'].apply(lambda x: BeautifulSoup(x, 'html.parser').get_text().strip())","output":{"0":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_4884/3590185498.py:2: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n  repub_data['body'] = repub_data['body'].apply(lambda x: BeautifulSoup(x, 'html.parser').get_text().strip())\n"}},"pos":15,"type":"cell"}
{"cell_type":"code","exec_count":29,"id":"769786","input":"#removes Accents\ndef remove_accented_chars(x):\n    x = unicodedata.normalize('NFKD', x).encode('ascii', 'ignore').decode('utf-8', 'ignore')\n    return x\nrepub_data['body'] = repub_data['body'].apply(lambda x: remove_accented_chars(x))","output":{"0":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_4884/3254416418.py:5: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n  repub_data['body'] = repub_data['body'].apply(lambda x: remove_accented_chars(x))\n"}},"pos":16,"type":"cell"}
{"cell_type":"code","exec_count":30,"id":"374b5b","input":"#filters out word counts\nrepub_data['word_counts'] = repub_data['body'].apply(lambda x: len(str(x).split()))\nrepub_data = repub_data[repub_data['word_counts']>8]\nrepub_data","output":{"0":{"name":"stderr","output_type":"stream","text":"/tmp/ipykernel_4884/2475686139.py:2: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n  repub_data['word_counts'] = repub_data['body'].apply(lambda x: len(str(x).split()))\n"},"1":{"data":{"text/html":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>body</th>\n      <th>score</th>\n      <th>word_counts</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>7</th>\n      <td>ngl, trump would look like a f boss if he did....</td>\n      <td>2</td>\n      <td>28</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>this photo and its caption are self evident. i...</td>\n      <td>3</td>\n      <td>92</td>\n    </tr>\n    <tr>\n      <th>12</th>\n      <td>imo, if she wants to represent our country on ...</td>\n      <td>2</td>\n      <td>122</td>\n    </tr>\n    <tr>\n      <th>21</th>\n      <td>the biden administration doesn t want them com...</td>\n      <td>3</td>\n      <td>15</td>\n    </tr>\n    <tr>\n      <th>26</th>\n      <td>everything about this current white house admi...</td>\n      <td>2</td>\n      <td>11</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12832</th>\n      <td>us is the worst police state in the world by t...</td>\n      <td>6</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>12837</th>\n      <td>how would restitution be enforced in an ancap ...</td>\n      <td>3</td>\n      <td>9</td>\n    </tr>\n    <tr>\n      <th>12839</th>\n      <td>you folks need to lay off of the theory and ac...</td>\n      <td>9</td>\n      <td>14</td>\n    </tr>\n    <tr>\n      <th>12840</th>\n      <td>carson's rejoinders to criticisms of his studi...</td>\n      <td>10</td>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>12841</th>\n      <td>this is the obama aurora billboard everyone's ...</td>\n      <td>12</td>\n      <td>9</td>\n    </tr>\n  </tbody>\n</table>\n<p>4553 rows √ó 3 columns</p>\n</div>","text/plain":"                                                    body  score  word_counts\n7      ngl, trump would look like a f boss if he did....      2           28\n10     this photo and its caption are self evident. i...      3           92\n12     imo, if she wants to represent our country on ...      2          122\n21     the biden administration doesn t want them com...      3           15\n26     everything about this current white house admi...      2           11\n...                                                  ...    ...          ...\n12832  us is the worst police state in the world by t...      6           12\n12837  how would restitution be enforced in an ancap ...      3            9\n12839  you folks need to lay off of the theory and ac...      9           14\n12840  carson's rejoinders to criticisms of his studi...     10           12\n12841  this is the obama aurora billboard everyone's ...     12            9\n\n[4553 rows x 3 columns]"},"exec_count":30,"output_type":"execute_result"}},"pos":17,"type":"cell"}
{"cell_type":"code","exec_count":31,"id":"8ef60f","input":"repub_data = repub_data[repub_data['body'] != '[deleted]']\nrepub_data.shape","output":{"0":{"data":{"text/plain":"(4553, 3)"},"exec_count":31,"output_type":"execute_result"}},"pos":18,"type":"cell"}
{"cell_type":"code","exec_count":33,"id":"050356","input":"path='/projects/820ea3ac-497c-43fd-9cb7-abe34292faa8/SC22-BatchA-Blurred-Futures/Data/'","pos":19,"type":"cell"}
{"cell_type":"code","exec_count":34,"id":"edeed9","input":"repub_data.to_csv(path+'clean-republican-data.csv')","pos":20,"type":"cell"}
{"cell_type":"code","exec_count":5,"id":"5dc5fa","input":"extra = '\\n\"Please note that this is a **Republican** subreddit. Please mind our [rules](/r/Republicans Rules](https://www.reddit.com/r/Republicans/about/rules/). Trolls and anyone who violates the rules stated in this message may be banned.\" \\n\\n*I am a bot, and this action was performed automatically. Please [contact the moderators of this subreddit](/message/compose/?to=/r/republicans) if you have any questions or concerns.*'","pos":5,"type":"cell"}
{"id":0,"time":1655503177914,"type":"user"}
{"last_load":1655503178661,"type":"file"}